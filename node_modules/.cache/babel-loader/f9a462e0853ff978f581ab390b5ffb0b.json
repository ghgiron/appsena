{"ast":null,"code":"var _jsxFileName = \"D:\\\\proyectos_react\\\\Proyecto_sena\\\\src\\\\app\\\\main\\\\apps\\\\chat\\\\ChatsSidebar.js\";\nimport FuseAnimateGroup from '@fuse/core/FuseAnimateGroup';\nimport FuseScrollbars from '@fuse/core/FuseScrollbars';\nimport FuseUtils from '@fuse/utils';\nimport AppBar from '@material-ui/core/AppBar';\nimport Avatar from '@material-ui/core/Avatar';\nimport Icon from '@material-ui/core/Icon';\nimport IconButton from '@material-ui/core/IconButton';\nimport Input from '@material-ui/core/Input';\nimport List from '@material-ui/core/List';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Paper from '@material-ui/core/Paper';\nimport { useTheme } from '@material-ui/core/styles';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport React, { useMemo, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport ContactListItem from './ContactListItem';\nimport StatusIcon from './StatusIcon';\nimport { getChat } from './store/chatSlice';\nimport { selectContacts } from './store/contactsSlice';\nimport { openUserSidebar } from './store/sidebarsSlice';\nimport { updateUserData } from './store/userSlice';\nconst statusArr = [{\n  title: 'Online',\n  value: 'online'\n}, {\n  title: 'Away',\n  value: 'away'\n}, {\n  title: 'Do not disturb',\n  value: 'do-not-disturb'\n}, {\n  title: 'Offline',\n  value: 'offline'\n}];\n\nfunction ChatsSidebar(props) {\n  const dispatch = useDispatch();\n  const contacts = useSelector(selectContacts);\n  const user = useSelector(({\n    chatApp\n  }) => chatApp.user);\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'));\n  const [searchText, setSearchText] = useState('');\n  const [statusMenuEl, setStatusMenuEl] = useState(null);\n  const [moreMenuEl, setMoreMenuEl] = useState(null);\n\n  function handleMoreMenuClick(event) {\n    setMoreMenuEl(event.currentTarget);\n  }\n\n  function handleMoreMenuClose(event) {\n    setMoreMenuEl(null);\n  }\n\n  function handleStatusMenuClick(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    setStatusMenuEl(event.currentTarget);\n  }\n\n  function handleStatusSelect(event, status) {\n    event.preventDefault();\n    event.stopPropagation();\n    dispatch(updateUserData({ ...user,\n      status\n    }));\n    setStatusMenuEl(null);\n  }\n\n  function handleStatusClose(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    setStatusMenuEl(null);\n  }\n\n  function handleSearchText(event) {\n    setSearchText(event.target.value);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-col flex-auto h-full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(AppBar, {\n    position: \"static\",\n    color: \"default\",\n    elevation: 1,\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(Toolbar, {\n    className: \"flex justify-between items-center px-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 5\n    }\n  }, user && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"relative w-40 h-40 p-0 mx-12 cursor-pointer\",\n    onClick: () => dispatch(openUserSidebar()),\n    onKeyDown: () => dispatch(openUserSidebar()),\n    role: \"button\",\n    tabIndex: 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    src: user.avatar,\n    alt: user.name,\n    className: \"w-40 h-40\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 8\n    }\n  }, !user.avatar || user.avatar === '' ? user.name[0] : ''), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"absolute right-0 bottom-0 -m-4 z-10 cursor-pointer\",\n    \"aria-owns\": statusMenuEl ? 'switch-menu' : null,\n    \"aria-haspopup\": \"true\",\n    onClick: handleStatusMenuClick,\n    onKeyDown: handleStatusMenuClick,\n    role: \"button\",\n    tabIndex: 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(StatusIcon, {\n    status: user.status,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Menu, {\n    id: \"status-switch\",\n    anchorEl: statusMenuEl,\n    open: Boolean(statusMenuEl),\n    onClose: handleStatusClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 8\n    }\n  }, statusArr.map(status => /*#__PURE__*/React.createElement(MenuItem, {\n    onClick: ev => handleStatusSelect(ev, status.value),\n    key: status.value,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(ListItemIcon, {\n    className: \"min-w-40\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(StatusIcon, {\n    status: status.value,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 12\n    }\n  })), /*#__PURE__*/React.createElement(ListItemText, {\n    primary: status.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    \"aria-owns\": moreMenuEl ? 'chats-more-menu' : null,\n    \"aria-haspopup\": \"true\",\n    onClick: handleMoreMenuClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 8\n    }\n  }, \"more_vert\")), /*#__PURE__*/React.createElement(Menu, {\n    id: \"chats-more-menu\",\n    anchorEl: moreMenuEl,\n    open: Boolean(moreMenuEl),\n    onClose: handleMoreMenuClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    onClick: handleMoreMenuClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 8\n    }\n  }, \"Profile\"), /*#__PURE__*/React.createElement(MenuItem, {\n    onClick: handleMoreMenuClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 8\n    }\n  }, \"Logout\")))), useMemo(() => /*#__PURE__*/React.createElement(Toolbar, {\n    className: \"px-16\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Paper, {\n    className: \"flex p-4 items-center w-full px-8 py-4 rounded-8\",\n    elevation: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    color: \"action\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 9\n    }\n  }, \"search\"), /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"Search or start new chat\",\n    className: \"flex flex-1 px-8\",\n    disableUnderline: true,\n    fullWidth: true,\n    value: searchText,\n    inputProps: {\n      'aria-label': 'Search'\n    },\n    onChange: handleSearchText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 9\n    }\n  }))), [searchText])), /*#__PURE__*/React.createElement(FuseScrollbars, {\n    className: \"overflow-y-auto flex-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(List, {\n    className: \"w-full\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 5\n    }\n  }, useMemo(() => {\n    function getFilteredArray(arr, _searchText) {\n      if (_searchText.length === 0) {\n        return arr;\n      }\n\n      return FuseUtils.filterArrayByString(arr, _searchText);\n    }\n\n    const chatListContacts = contacts.length > 0 && user && user.chatList ? user.chatList.map(_chat => ({ ..._chat,\n      ...contacts.find(_contact => _contact.id === _chat.contactId)\n    })) : [];\n    const filteredContacts = getFilteredArray([...contacts], searchText);\n    const filteredChatList = getFilteredArray([...chatListContacts], searchText);\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(FuseAnimateGroup, {\n      enter: {\n        animation: 'transition.expandIn'\n      },\n      className: \"flex flex-col flex-shrink-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }\n    }, filteredChatList.length > 0 && /*#__PURE__*/React.createElement(Typography, {\n      className: \"font-300 text-20 px-16 py-24\",\n      color: \"secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }\n    }, \"Chats\"), filteredChatList.map(contact => /*#__PURE__*/React.createElement(ContactListItem, {\n      key: contact.id,\n      contact: contact,\n      onContactClick: contactId => dispatch(getChat({\n        contactId,\n        isMobile\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 11\n      }\n    })), filteredContacts.length > 0 && /*#__PURE__*/React.createElement(Typography, {\n      className: \"font-300 text-20 px-16 py-24\",\n      color: \"secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 11\n      }\n    }, \"Contacts\"), filteredContacts.map(contact => /*#__PURE__*/React.createElement(ContactListItem, {\n      key: contact.id,\n      contact: contact,\n      onContactClick: contactId => dispatch(getChat({\n        contactId,\n        isMobile\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 11\n      }\n    }))));\n  }, [contacts, user, searchText, dispatch, isMobile]))));\n}\n\nexport default ChatsSidebar;","map":{"version":3,"sources":["D:/proyectos_react/Proyecto_sena/src/app/main/apps/chat/ChatsSidebar.js"],"names":["FuseAnimateGroup","FuseScrollbars","FuseUtils","AppBar","Avatar","Icon","IconButton","Input","List","ListItemIcon","ListItemText","Menu","MenuItem","Paper","useTheme","Toolbar","Typography","useMediaQuery","React","useMemo","useState","useDispatch","useSelector","ContactListItem","StatusIcon","getChat","selectContacts","openUserSidebar","updateUserData","statusArr","title","value","ChatsSidebar","props","dispatch","contacts","user","chatApp","theme","isMobile","breakpoints","down","searchText","setSearchText","statusMenuEl","setStatusMenuEl","moreMenuEl","setMoreMenuEl","handleMoreMenuClick","event","currentTarget","handleMoreMenuClose","handleStatusMenuClick","preventDefault","stopPropagation","handleStatusSelect","status","handleStatusClose","handleSearchText","target","avatar","name","Boolean","map","ev","getFilteredArray","arr","_searchText","length","filterArrayByString","chatListContacts","chatList","_chat","find","_contact","id","contactId","filteredContacts","filteredChatList","animation","contact"],"mappings":"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","sourcesContent":["import FuseAnimateGroup from '@fuse/core/FuseAnimateGroup';\nimport FuseScrollbars from '@fuse/core/FuseScrollbars';\nimport FuseUtils from '@fuse/utils';\nimport AppBar from '@material-ui/core/AppBar';\nimport Avatar from '@material-ui/core/Avatar';\nimport Icon from '@material-ui/core/Icon';\nimport IconButton from '@material-ui/core/IconButton';\nimport Input from '@material-ui/core/Input';\nimport List from '@material-ui/core/List';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Paper from '@material-ui/core/Paper';\nimport { useTheme } from '@material-ui/core/styles';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport React, { useMemo, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport ContactListItem from './ContactListItem';\nimport StatusIcon from './StatusIcon';\nimport { getChat } from './store/chatSlice';\nimport { selectContacts } from './store/contactsSlice';\nimport { openUserSidebar } from './store/sidebarsSlice';\nimport { updateUserData } from './store/userSlice';\n\nconst statusArr = [\n\t{\n\t\ttitle: 'Online',\n\t\tvalue: 'online'\n\t},\n\t{\n\t\ttitle: 'Away',\n\t\tvalue: 'away'\n\t},\n\t{\n\t\ttitle: 'Do not disturb',\n\t\tvalue: 'do-not-disturb'\n\t},\n\t{\n\t\ttitle: 'Offline',\n\t\tvalue: 'offline'\n\t}\n];\n\nfunction ChatsSidebar(props) {\n\tconst dispatch = useDispatch();\n\tconst contacts = useSelector(selectContacts);\n\tconst user = useSelector(({ chatApp }) => chatApp.user);\n\tconst theme = useTheme();\n\tconst isMobile = useMediaQuery(theme.breakpoints.down('md'));\n\n\tconst [searchText, setSearchText] = useState('');\n\tconst [statusMenuEl, setStatusMenuEl] = useState(null);\n\tconst [moreMenuEl, setMoreMenuEl] = useState(null);\n\n\tfunction handleMoreMenuClick(event) {\n\t\tsetMoreMenuEl(event.currentTarget);\n\t}\n\n\tfunction handleMoreMenuClose(event) {\n\t\tsetMoreMenuEl(null);\n\t}\n\n\tfunction handleStatusMenuClick(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tsetStatusMenuEl(event.currentTarget);\n\t}\n\n\tfunction handleStatusSelect(event, status) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tdispatch(\n\t\t\tupdateUserData({\n\t\t\t\t...user,\n\t\t\t\tstatus\n\t\t\t})\n\t\t);\n\t\tsetStatusMenuEl(null);\n\t}\n\n\tfunction handleStatusClose(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tsetStatusMenuEl(null);\n\t}\n\n\tfunction handleSearchText(event) {\n\t\tsetSearchText(event.target.value);\n\t}\n\n\treturn (\n\t\t<div className=\"flex flex-col flex-auto h-full\">\n\t\t\t<AppBar position=\"static\" color=\"default\" elevation={1} className=\"\">\n\t\t\t\t<Toolbar className=\"flex justify-between items-center px-4\">\n\t\t\t\t\t{user && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"relative w-40 h-40 p-0 mx-12 cursor-pointer\"\n\t\t\t\t\t\t\tonClick={() => dispatch(openUserSidebar())}\n\t\t\t\t\t\t\tonKeyDown={() => dispatch(openUserSidebar())}\n\t\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Avatar src={user.avatar} alt={user.name} className=\"w-40 h-40\">\n\t\t\t\t\t\t\t\t{!user.avatar || user.avatar === '' ? user.name[0] : ''}\n\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"absolute right-0 bottom-0 -m-4 z-10 cursor-pointer\"\n\t\t\t\t\t\t\t\taria-owns={statusMenuEl ? 'switch-menu' : null}\n\t\t\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\t\t\tonClick={handleStatusMenuClick}\n\t\t\t\t\t\t\t\tonKeyDown={handleStatusMenuClick}\n\t\t\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<StatusIcon status={user.status} />\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\t\tid=\"status-switch\"\n\t\t\t\t\t\t\t\tanchorEl={statusMenuEl}\n\t\t\t\t\t\t\t\topen={Boolean(statusMenuEl)}\n\t\t\t\t\t\t\t\tonClose={handleStatusClose}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{statusArr.map(status => (\n\t\t\t\t\t\t\t\t\t<MenuItem onClick={ev => handleStatusSelect(ev, status.value)} key={status.value}>\n\t\t\t\t\t\t\t\t\t\t<ListItemIcon className=\"min-w-40\">\n\t\t\t\t\t\t\t\t\t\t\t<StatusIcon status={status.value} />\n\t\t\t\t\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t\t\t\t\t<ListItemText primary={status.title} />\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</Menu>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\taria-owns={moreMenuEl ? 'chats-more-menu' : null}\n\t\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\t\tonClick={handleMoreMenuClick}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Icon>more_vert</Icon>\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t<Menu\n\t\t\t\t\t\t\tid=\"chats-more-menu\"\n\t\t\t\t\t\t\tanchorEl={moreMenuEl}\n\t\t\t\t\t\t\topen={Boolean(moreMenuEl)}\n\t\t\t\t\t\t\tonClose={handleMoreMenuClose}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<MenuItem onClick={handleMoreMenuClose}>Profile</MenuItem>\n\t\t\t\t\t\t\t<MenuItem onClick={handleMoreMenuClose}>Logout</MenuItem>\n\t\t\t\t\t\t</Menu>\n\t\t\t\t\t</div>\n\t\t\t\t</Toolbar>\n\t\t\t\t{useMemo(\n\t\t\t\t\t() => (\n\t\t\t\t\t\t<Toolbar className=\"px-16\">\n\t\t\t\t\t\t\t<Paper className=\"flex p-4 items-center w-full px-8 py-4 rounded-8\" elevation={1}>\n\t\t\t\t\t\t\t\t<Icon color=\"action\">search</Icon>\n\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tplaceholder=\"Search or start new chat\"\n\t\t\t\t\t\t\t\t\tclassName=\"flex flex-1 px-8\"\n\t\t\t\t\t\t\t\t\tdisableUnderline\n\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\tvalue={searchText}\n\t\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\t\t'aria-label': 'Search'\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tonChange={handleSearchText}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t</Toolbar>\n\t\t\t\t\t),\n\t\t\t\t\t[searchText]\n\t\t\t\t)}\n\t\t\t</AppBar>\n\n\t\t\t<FuseScrollbars className=\"overflow-y-auto flex-1\">\n\t\t\t\t<List className=\"w-full\">\n\t\t\t\t\t{useMemo(() => {\n\t\t\t\t\t\tfunction getFilteredArray(arr, _searchText) {\n\t\t\t\t\t\t\tif (_searchText.length === 0) {\n\t\t\t\t\t\t\t\treturn arr;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn FuseUtils.filterArrayByString(arr, _searchText);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst chatListContacts =\n\t\t\t\t\t\t\tcontacts.length > 0 && user && user.chatList\n\t\t\t\t\t\t\t\t? user.chatList.map(_chat => ({\n\t\t\t\t\t\t\t\t\t\t..._chat,\n\t\t\t\t\t\t\t\t\t\t...contacts.find(_contact => _contact.id === _chat.contactId)\n\t\t\t\t\t\t\t\t  }))\n\t\t\t\t\t\t\t\t: [];\n\t\t\t\t\t\tconst filteredContacts = getFilteredArray([...contacts], searchText);\n\t\t\t\t\t\tconst filteredChatList = getFilteredArray([...chatListContacts], searchText);\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<FuseAnimateGroup\n\t\t\t\t\t\t\t\t\tenter={{\n\t\t\t\t\t\t\t\t\t\tanimation: 'transition.expandIn'\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tclassName=\"flex flex-col flex-shrink-0\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{filteredChatList.length > 0 && (\n\t\t\t\t\t\t\t\t\t\t<Typography className=\"font-300 text-20 px-16 py-24\" color=\"secondary\">\n\t\t\t\t\t\t\t\t\t\t\tChats\n\t\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t{filteredChatList.map(contact => (\n\t\t\t\t\t\t\t\t\t\t<ContactListItem\n\t\t\t\t\t\t\t\t\t\t\tkey={contact.id}\n\t\t\t\t\t\t\t\t\t\t\tcontact={contact}\n\t\t\t\t\t\t\t\t\t\t\tonContactClick={contactId => dispatch(getChat({ contactId, isMobile }))}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t))}\n\n\t\t\t\t\t\t\t\t\t{filteredContacts.length > 0 && (\n\t\t\t\t\t\t\t\t\t\t<Typography className=\"font-300 text-20 px-16 py-24\" color=\"secondary\">\n\t\t\t\t\t\t\t\t\t\t\tContacts\n\t\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t{filteredContacts.map(contact => (\n\t\t\t\t\t\t\t\t\t\t<ContactListItem\n\t\t\t\t\t\t\t\t\t\t\tkey={contact.id}\n\t\t\t\t\t\t\t\t\t\t\tcontact={contact}\n\t\t\t\t\t\t\t\t\t\t\tonContactClick={contactId => dispatch(getChat({ contactId, isMobile }))}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</FuseAnimateGroup>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t);\n\t\t\t\t\t}, [contacts, user, searchText, dispatch, isMobile])}\n\t\t\t\t</List>\n\t\t\t</FuseScrollbars>\n\t\t</div>\n\t);\n}\n\nexport default ChatsSidebar;\n"]},"metadata":{},"sourceType":"module"}