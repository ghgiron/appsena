{"ast":null,"code":"var _jsxFileName = \"D:\\\\proyectos_react\\\\Proyecto_sena\\\\src\\\\app\\\\main\\\\apps\\\\e-commerce\\\\orders\\\\OrdersTable.js\";\nimport FuseScrollbars from '@fuse/core/FuseScrollbars';\nimport FuseUtils from '@fuse/utils';\nimport _ from '@lodash';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TablePagination from '@material-ui/core/TablePagination';\nimport TableRow from '@material-ui/core/TableRow';\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport OrdersStatus from '../order/OrdersStatus';\nimport { selectOrders, getOrders } from '../store/ordersSlice';\nimport OrdersTableHead from './OrdersTableHead';\n\nfunction OrdersTable(props) {\n  const dispatch = useDispatch();\n  const orders = useSelector(selectOrders);\n  const searchText = useSelector(({\n    eCommerceApp\n  }) => eCommerceApp.orders.searchText);\n  const [selected, setSelected] = useState([]);\n  const [data, setData] = useState(orders);\n  const [page, setPage] = useState(0);\n  const [rowsPerPage, setRowsPerPage] = useState(10);\n  const [order, setOrder] = useState({\n    direction: 'asc',\n    id: null\n  });\n  useEffect(() => {\n    dispatch(getOrders());\n  }, [dispatch]);\n  useEffect(() => {\n    if (searchText.length !== 0) {\n      setData(FuseUtils.filterArrayByString(orders, searchText));\n      setPage(0);\n    } else {\n      setData(orders);\n    }\n  }, [orders, searchText]);\n\n  function handleRequestSort(event, property) {\n    const id = property;\n    let direction = 'desc';\n\n    if (order.id === property && order.direction === 'desc') {\n      direction = 'asc';\n    }\n\n    setOrder({\n      direction,\n      id\n    });\n  }\n\n  function handleSelectAllClick(event) {\n    if (event.target.checked) {\n      setSelected(data.map(n => n.id));\n      return;\n    }\n\n    setSelected([]);\n  }\n\n  function handleClick(item) {\n    props.history.push(`/apps/e-commerce/orders/${item.id}`);\n  }\n\n  function handleCheck(event, id) {\n    const selectedIndex = selected.indexOf(id);\n    let newSelected = [];\n\n    if (selectedIndex === -1) {\n      newSelected = newSelected.concat(selected, id);\n    } else if (selectedIndex === 0) {\n      newSelected = newSelected.concat(selected.slice(1));\n    } else if (selectedIndex === selected.length - 1) {\n      newSelected = newSelected.concat(selected.slice(0, -1));\n    } else if (selectedIndex > 0) {\n      newSelected = newSelected.concat(selected.slice(0, selectedIndex), selected.slice(selectedIndex + 1));\n    }\n\n    setSelected(newSelected);\n  }\n\n  function handleChangePage(event, value) {\n    setPage(value);\n  }\n\n  function handleChangeRowsPerPage(event) {\n    setRowsPerPage(event.target.value);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-full flex flex-col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(FuseScrollbars, {\n    className: \"flex-grow overflow-x-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    stickyHeader: true,\n    className: \"min-w-xl\",\n    \"aria-labelledby\": \"tableTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(OrdersTableHead, {\n    numSelected: selected.length,\n    order: order,\n    onSelectAllClick: handleSelectAllClick,\n    onRequestSort: handleRequestSort,\n    rowCount: data.length,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 6\n    }\n  }), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 6\n    }\n  }, _.orderBy(data, [o => {\n    switch (order.id) {\n      case 'id':\n        {\n          return parseInt(o.id, 10);\n        }\n\n      case 'customer':\n        {\n          return o.customer.firstName;\n        }\n\n      case 'payment':\n        {\n          return o.payment.method;\n        }\n\n      case 'status':\n        {\n          return o.status[0].name;\n        }\n\n      default:\n        {\n          return o[order.id];\n        }\n    }\n  }], [order.direction]).slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(n => {\n    const isSelected = selected.indexOf(n.id) !== -1;\n    return /*#__PURE__*/React.createElement(TableRow, {\n      className: \"h-64 cursor-pointer\",\n      hover: true,\n      role: \"checkbox\",\n      \"aria-checked\": isSelected,\n      tabIndex: -1,\n      key: n.id,\n      selected: isSelected,\n      onClick: event => handleClick(n),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      className: \"w-40 md:w-64 text-center\",\n      padding: \"none\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      checked: isSelected,\n      onClick: event => event.stopPropagation(),\n      onChange: event => handleCheck(event, n.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 12\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      className: \"p-4 md:p-16\",\n      component: \"th\",\n      scope: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 11\n      }\n    }, n.id), /*#__PURE__*/React.createElement(TableCell, {\n      className: \"p-4 md:p-16\",\n      component: \"th\",\n      scope: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 11\n      }\n    }, n.reference), /*#__PURE__*/React.createElement(TableCell, {\n      className: \"p-4 md:p-16 truncate\",\n      component: \"th\",\n      scope: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 11\n      }\n    }, `${n.customer.firstName} ${n.customer.lastName}`), /*#__PURE__*/React.createElement(TableCell, {\n      className: \"p-4 md:p-16\",\n      component: \"th\",\n      scope: \"row\",\n      align: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 12\n      }\n    }, \"$\"), n.total), /*#__PURE__*/React.createElement(TableCell, {\n      className: \"p-4 md:p-16\",\n      component: \"th\",\n      scope: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 11\n      }\n    }, n.payment.method), /*#__PURE__*/React.createElement(TableCell, {\n      className: \"p-4 md:p-16\",\n      component: \"th\",\n      scope: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(OrdersStatus, {\n      name: n.status[0].name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 12\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      className: \"p-4 md:p-16\",\n      component: \"th\",\n      scope: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 11\n      }\n    }, n.date));\n  })))), /*#__PURE__*/React.createElement(TablePagination, {\n    className: \"flex-shrink-0 border-t-1\",\n    component: \"div\",\n    count: data.length,\n    rowsPerPage: rowsPerPage,\n    page: page,\n    backIconButtonProps: {\n      'aria-label': 'Previous Page'\n    },\n    nextIconButtonProps: {\n      'aria-label': 'Next Page'\n    },\n    onChangePage: handleChangePage,\n    onChangeRowsPerPage: handleChangeRowsPerPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 4\n    }\n  }));\n}\n\nexport default withRouter(OrdersTable);","map":{"version":3,"sources":["D:/proyectos_react/Proyecto_sena/src/app/main/apps/e-commerce/orders/OrdersTable.js"],"names":["FuseScrollbars","FuseUtils","_","Checkbox","Table","TableBody","TableCell","TablePagination","TableRow","React","useEffect","useState","useDispatch","useSelector","withRouter","OrdersStatus","selectOrders","getOrders","OrdersTableHead","OrdersTable","props","dispatch","orders","searchText","eCommerceApp","selected","setSelected","data","setData","page","setPage","rowsPerPage","setRowsPerPage","order","setOrder","direction","id","length","filterArrayByString","handleRequestSort","event","property","handleSelectAllClick","target","checked","map","n","handleClick","item","history","push","handleCheck","selectedIndex","indexOf","newSelected","concat","slice","handleChangePage","value","handleChangeRowsPerPage","orderBy","o","parseInt","customer","firstName","payment","method","status","name","isSelected","stopPropagation","reference","lastName","total","date"],"mappings":"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","sourcesContent":["import FuseScrollbars from '@fuse/core/FuseScrollbars';\nimport FuseUtils from '@fuse/utils';\nimport _ from '@lodash';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TablePagination from '@material-ui/core/TablePagination';\nimport TableRow from '@material-ui/core/TableRow';\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport OrdersStatus from '../order/OrdersStatus';\nimport { selectOrders, getOrders } from '../store/ordersSlice';\nimport OrdersTableHead from './OrdersTableHead';\n\nfunction OrdersTable(props) {\n\tconst dispatch = useDispatch();\n\tconst orders = useSelector(selectOrders);\n\tconst searchText = useSelector(({ eCommerceApp }) => eCommerceApp.orders.searchText);\n\n\tconst [selected, setSelected] = useState([]);\n\tconst [data, setData] = useState(orders);\n\tconst [page, setPage] = useState(0);\n\tconst [rowsPerPage, setRowsPerPage] = useState(10);\n\tconst [order, setOrder] = useState({\n\t\tdirection: 'asc',\n\t\tid: null\n\t});\n\n\tuseEffect(() => {\n\t\tdispatch(getOrders());\n\t}, [dispatch]);\n\n\tuseEffect(() => {\n\t\tif (searchText.length !== 0) {\n\t\t\tsetData(FuseUtils.filterArrayByString(orders, searchText));\n\t\t\tsetPage(0);\n\t\t} else {\n\t\t\tsetData(orders);\n\t\t}\n\t}, [orders, searchText]);\n\n\tfunction handleRequestSort(event, property) {\n\t\tconst id = property;\n\t\tlet direction = 'desc';\n\n\t\tif (order.id === property && order.direction === 'desc') {\n\t\t\tdirection = 'asc';\n\t\t}\n\n\t\tsetOrder({\n\t\t\tdirection,\n\t\t\tid\n\t\t});\n\t}\n\n\tfunction handleSelectAllClick(event) {\n\t\tif (event.target.checked) {\n\t\t\tsetSelected(data.map(n => n.id));\n\t\t\treturn;\n\t\t}\n\t\tsetSelected([]);\n\t}\n\n\tfunction handleClick(item) {\n\t\tprops.history.push(`/apps/e-commerce/orders/${item.id}`);\n\t}\n\n\tfunction handleCheck(event, id) {\n\t\tconst selectedIndex = selected.indexOf(id);\n\t\tlet newSelected = [];\n\n\t\tif (selectedIndex === -1) {\n\t\t\tnewSelected = newSelected.concat(selected, id);\n\t\t} else if (selectedIndex === 0) {\n\t\t\tnewSelected = newSelected.concat(selected.slice(1));\n\t\t} else if (selectedIndex === selected.length - 1) {\n\t\t\tnewSelected = newSelected.concat(selected.slice(0, -1));\n\t\t} else if (selectedIndex > 0) {\n\t\t\tnewSelected = newSelected.concat(selected.slice(0, selectedIndex), selected.slice(selectedIndex + 1));\n\t\t}\n\n\t\tsetSelected(newSelected);\n\t}\n\n\tfunction handleChangePage(event, value) {\n\t\tsetPage(value);\n\t}\n\n\tfunction handleChangeRowsPerPage(event) {\n\t\tsetRowsPerPage(event.target.value);\n\t}\n\n\treturn (\n\t\t<div className=\"w-full flex flex-col\">\n\t\t\t<FuseScrollbars className=\"flex-grow overflow-x-auto\">\n\t\t\t\t<Table stickyHeader className=\"min-w-xl\" aria-labelledby=\"tableTitle\">\n\t\t\t\t\t<OrdersTableHead\n\t\t\t\t\t\tnumSelected={selected.length}\n\t\t\t\t\t\torder={order}\n\t\t\t\t\t\tonSelectAllClick={handleSelectAllClick}\n\t\t\t\t\t\tonRequestSort={handleRequestSort}\n\t\t\t\t\t\trowCount={data.length}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t{_.orderBy(\n\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\to => {\n\t\t\t\t\t\t\t\t\tswitch (order.id) {\n\t\t\t\t\t\t\t\t\t\tcase 'id': {\n\t\t\t\t\t\t\t\t\t\t\treturn parseInt(o.id, 10);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tcase 'customer': {\n\t\t\t\t\t\t\t\t\t\t\treturn o.customer.firstName;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tcase 'payment': {\n\t\t\t\t\t\t\t\t\t\t\treturn o.payment.method;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tcase 'status': {\n\t\t\t\t\t\t\t\t\t\t\treturn o.status[0].name;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tdefault: {\n\t\t\t\t\t\t\t\t\t\t\treturn o[order.id];\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t[order.direction]\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n\t\t\t\t\t\t\t.map(n => {\n\t\t\t\t\t\t\t\tconst isSelected = selected.indexOf(n.id) !== -1;\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<TableRow\n\t\t\t\t\t\t\t\t\t\tclassName=\"h-64 cursor-pointer\"\n\t\t\t\t\t\t\t\t\t\thover\n\t\t\t\t\t\t\t\t\t\trole=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\taria-checked={isSelected}\n\t\t\t\t\t\t\t\t\t\ttabIndex={-1}\n\t\t\t\t\t\t\t\t\t\tkey={n.id}\n\t\t\t\t\t\t\t\t\t\tselected={isSelected}\n\t\t\t\t\t\t\t\t\t\tonClick={event => handleClick(n)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<TableCell className=\"w-40 md:w-64 text-center\" padding=\"none\">\n\t\t\t\t\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\t\t\t\t\tchecked={isSelected}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={event => event.stopPropagation()}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={event => handleCheck(event, n.id)}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</TableCell>\n\n\t\t\t\t\t\t\t\t\t\t<TableCell className=\"p-4 md:p-16\" component=\"th\" scope=\"row\">\n\t\t\t\t\t\t\t\t\t\t\t{n.id}\n\t\t\t\t\t\t\t\t\t\t</TableCell>\n\n\t\t\t\t\t\t\t\t\t\t<TableCell className=\"p-4 md:p-16\" component=\"th\" scope=\"row\">\n\t\t\t\t\t\t\t\t\t\t\t{n.reference}\n\t\t\t\t\t\t\t\t\t\t</TableCell>\n\n\t\t\t\t\t\t\t\t\t\t<TableCell className=\"p-4 md:p-16 truncate\" component=\"th\" scope=\"row\">\n\t\t\t\t\t\t\t\t\t\t\t{`${n.customer.firstName} ${n.customer.lastName}`}\n\t\t\t\t\t\t\t\t\t\t</TableCell>\n\n\t\t\t\t\t\t\t\t\t\t<TableCell className=\"p-4 md:p-16\" component=\"th\" scope=\"row\" align=\"right\">\n\t\t\t\t\t\t\t\t\t\t\t<span>$</span>\n\t\t\t\t\t\t\t\t\t\t\t{n.total}\n\t\t\t\t\t\t\t\t\t\t</TableCell>\n\n\t\t\t\t\t\t\t\t\t\t<TableCell className=\"p-4 md:p-16\" component=\"th\" scope=\"row\">\n\t\t\t\t\t\t\t\t\t\t\t{n.payment.method}\n\t\t\t\t\t\t\t\t\t\t</TableCell>\n\n\t\t\t\t\t\t\t\t\t\t<TableCell className=\"p-4 md:p-16\" component=\"th\" scope=\"row\">\n\t\t\t\t\t\t\t\t\t\t\t<OrdersStatus name={n.status[0].name} />\n\t\t\t\t\t\t\t\t\t\t</TableCell>\n\n\t\t\t\t\t\t\t\t\t\t<TableCell className=\"p-4 md:p-16\" component=\"th\" scope=\"row\">\n\t\t\t\t\t\t\t\t\t\t\t{n.date}\n\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t</TableBody>\n\t\t\t\t</Table>\n\t\t\t</FuseScrollbars>\n\n\t\t\t<TablePagination\n\t\t\t\tclassName=\"flex-shrink-0 border-t-1\"\n\t\t\t\tcomponent=\"div\"\n\t\t\t\tcount={data.length}\n\t\t\t\trowsPerPage={rowsPerPage}\n\t\t\t\tpage={page}\n\t\t\t\tbackIconButtonProps={{\n\t\t\t\t\t'aria-label': 'Previous Page'\n\t\t\t\t}}\n\t\t\t\tnextIconButtonProps={{\n\t\t\t\t\t'aria-label': 'Next Page'\n\t\t\t\t}}\n\t\t\t\tonChangePage={handleChangePage}\n\t\t\t\tonChangeRowsPerPage={handleChangeRowsPerPage}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport default withRouter(OrdersTable);\n"]},"metadata":{},"sourceType":"module"}