{"ast":null,"code":"import _classCallCheck from\"D:\\\\proyectos_react\\\\Proyecto_sena_desarrollo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\proyectos_react\\\\Proyecto_sena_desarrollo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\proyectos_react\\\\Proyecto_sena_desarrollo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\proyectos_react\\\\Proyecto_sena_desarrollo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import FuseSplashScreen from'@fuse/core/FuseSplashScreen';import jwtService from'app/services/jwtService';import React,{Component}from'react';import{connect}from'react-redux';import{bindActionCreators}from'@reduxjs/toolkit';import{hideMessage,showMessage}from'app/store/fuse/messageSlice';import{setUserData,logoutUser}from'./store/userSlice';var Auth=/*#__PURE__*/function(_Component){_inherits(Auth,_Component);var _super=_createSuper(Auth);function Auth(){var _this;_classCallCheck(this,Auth);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={waitAuthCheck:true};_this.jwtCheck=function(){return new Promise(function(resolve){jwtService.on('onAutoLogin',function(){_this.props.showMessage({message:'Logging in with JWT'});/**\n\t\t\t\t * Sign in and retrieve user data from Api\n\t\t\t\t */jwtService.signInWithToken().then(function(user){_this.props.setUserData(user);resolve();_this.props.showMessage({message:'Logged in with JWT'});}).catch(function(error){_this.props.showMessage({message:error.message});resolve();});});jwtService.on('onAutoLogout',function(message){if(message){_this.props.showMessage({message:message});}_this.props.logout();resolve();});jwtService.on('onNoAccessToken',function(){resolve();});jwtService.init();return Promise.resolve();});};return _this;}_createClass(Auth,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;return Promise.all([// Comment the lines which you do not use\nthis.jwtCheck()]).then(function(){_this2.setState({waitAuthCheck:false});});}},{key:\"render\",value:function render(){return this.state.waitAuthCheck?/*#__PURE__*/React.createElement(FuseSplashScreen,null):/*#__PURE__*/React.createElement(React.Fragment,null,this.props.children);}}]);return Auth;}(Component);function mapDispatchToProps(dispatch){return bindActionCreators({logout:logoutUser,setUserData:setUserData,showMessage:showMessage,hideMessage:hideMessage},dispatch);}export default connect(null,mapDispatchToProps)(Auth);","map":null,"metadata":{},"sourceType":"module"}