{"ast":null,"code":"var _jsxFileName = \"D:\\\\proyectos_react\\\\Proyecto_sena\\\\src\\\\app\\\\main\\\\apps\\\\scrumboard\\\\board\\\\BoardCard.js\";\nimport _ from '@lodash';\nimport Avatar from '@material-ui/core/Avatar';\nimport Card from '@material-ui/core/Card';\nimport Icon from '@material-ui/core/Icon';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Typography from '@material-ui/core/Typography';\nimport clsx from 'clsx';\nimport moment from 'moment';\nimport React from 'react';\nimport { Draggable } from 'react-beautiful-dnd';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { openCardDialog } from '../store/cardSlice';\nconst useStyles = makeStyles(theme => ({\n  card: {\n    transitionProperty: 'box-shadow',\n    transitionDuration: theme.transitions.duration.short,\n    transitionTimingFunction: theme.transitions.easing.easeInOut\n  }\n}));\n\nfunction BoardCard(props) {\n  const dispatch = useDispatch();\n  const board = useSelector(({\n    scrumboardApp\n  }) => scrumboardApp.board);\n  const classes = useStyles(props);\n  const {\n    cardId,\n    index\n  } = props;\n\n  const card = _.find(board.cards, {\n    id: cardId\n  });\n\n  const checkItemsChecked = getCheckItemsChecked(card);\n  const checkItems = getCheckItems(card);\n  const commentsCount = getCommentsCount(card);\n\n  function handleCardClick(ev, _card) {\n    ev.preventDefault();\n    dispatch(openCardDialog(_card));\n  }\n\n  function getCheckItemsChecked(_card) {\n    return _.sum(_card.checklists.map(list => _.sum(list.checkItems.map(x => x.checked ? 1 : 0))));\n  }\n\n  function getCheckItems(_card) {\n    return _.sum(_card.checklists.map(x => x.checkItems.length));\n  }\n\n  function getCommentsCount(_card) {\n    return _.sum(_card.activities.map(x => x.type === 'comment' ? 1 : 0));\n  }\n\n  return /*#__PURE__*/React.createElement(Draggable, {\n    draggableId: cardId,\n    index: index,\n    type: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 3\n    }\n  }, (provided, snapshot) => /*#__PURE__*/React.createElement(\"div\", Object.assign({\n    ref: provided.innerRef\n  }, provided.draggableProps, provided.dragHandleProps, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Card, {\n    className: clsx(classes.card, 'w-full mb-16 rounded-4 cursor-pointer border-1'),\n    elevation: snapshot.isDragging ? 3 : 0,\n    onClick: ev => handleCardClick(ev, card),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 6\n    }\n  }, board.settings.cardCoverImages && card.idAttachmentCover !== '' && /*#__PURE__*/React.createElement(\"img\", {\n    className: \"block\",\n    src: _.find(card.attachments, {\n      id: card.idAttachmentCover\n    }).src,\n    alt: \"card cover\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 8\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-16 pb-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }, card.idLabels.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-wrap mb-8 -mx-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, card.idLabels.map(id => {\n    const label = _.find(board.labels, {\n      id\n    });\n\n    return /*#__PURE__*/React.createElement(Tooltip, {\n      title: label.name,\n      key: id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: clsx(label.class, 'w-32  h-6 rounded-6 mx-4 mb-6'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }\n    }));\n  })), /*#__PURE__*/React.createElement(Typography, {\n    className: \"font-600 mb-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 8\n    }\n  }, card.name), (card.due || checkItems > 0) && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center mb-12 -mx-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, card.due && /*#__PURE__*/React.createElement(\"div\", {\n    className: clsx('flex items-center px-8 py-4 mx-4 rounded-sm', moment() > moment(card.due) ? 'bg-red text-white' : 'bg-green text-white'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    className: \"text-16\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 12\n    }\n  }, \"access_time\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"mx-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 12\n    }\n  }, moment(card.due).format('MMM Do YY'))), checkItems > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: clsx('flex items-center px-8 py-4 mx-4 rounded-sm', checkItemsChecked === checkItems ? 'bg-green text-white' : 'bg-grey-700 text-white'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    className: \"text-16\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 12\n    }\n  }, \"check_circle\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"mx-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 12\n    }\n  }, `${checkItemsChecked}/${checkItems}`))), card.idMembers.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-wrap mb-12 -mx-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }, card.idMembers.map(id => {\n    const member = _.find(board.members, {\n      id\n    });\n\n    return /*#__PURE__*/React.createElement(Tooltip, {\n      title: member.name,\n      key: id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 12\n      }\n    }, /*#__PURE__*/React.createElement(Avatar, {\n      className: \"mx-4 w-32 h-32\",\n      src: member.avatar,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 13\n      }\n    }));\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 10\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex justify-between h-48 px-16 border-t-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center -mx-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 8\n    }\n  }, card.subscribed && /*#__PURE__*/React.createElement(Icon, {\n    className: \"text-18 mx-6\",\n    color: \"action\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 10\n    }\n  }, \"remove_red_eye\"), card.description !== '' && /*#__PURE__*/React.createElement(Icon, {\n    className: \"text-18 mx-6\",\n    color: \"action\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 10\n    }\n  }, \"description\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex items-center justify-end -mx-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 8\n    }\n  }, card.attachments && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"flex items-center mx-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    className: \"text-18\",\n    color: \"action\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }, \"attachment\"), /*#__PURE__*/React.createElement(Typography, {\n    className: \"mx-8\",\n    color: \"textSecondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 11\n    }\n  }, card.attachments.length)), commentsCount > 0 && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"flex items-center mx-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    className: \"text-18\",\n    color: \"action\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 11\n    }\n  }, \"comment\"), /*#__PURE__*/React.createElement(Typography, {\n    className: \"mx-8\",\n    color: \"textSecondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 11\n    }\n  }, commentsCount)))))));\n}\n\nexport default BoardCard;","map":{"version":3,"sources":["D:/proyectos_react/Proyecto_sena/src/app/main/apps/scrumboard/board/BoardCard.js"],"names":["_","Avatar","Card","Icon","makeStyles","Tooltip","Typography","clsx","moment","React","Draggable","useDispatch","useSelector","openCardDialog","useStyles","theme","card","transitionProperty","transitionDuration","transitions","duration","short","transitionTimingFunction","easing","easeInOut","BoardCard","props","dispatch","board","scrumboardApp","classes","cardId","index","find","cards","id","checkItemsChecked","getCheckItemsChecked","checkItems","getCheckItems","commentsCount","getCommentsCount","handleCardClick","ev","_card","preventDefault","sum","checklists","map","list","x","checked","length","activities","type","provided","snapshot","innerRef","draggableProps","dragHandleProps","isDragging","settings","cardCoverImages","idAttachmentCover","attachments","src","idLabels","label","labels","name","class","due","format","idMembers","member","members","avatar","subscribed","description"],"mappings":"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","sourcesContent":["import _ from '@lodash';\nimport Avatar from '@material-ui/core/Avatar';\nimport Card from '@material-ui/core/Card';\nimport Icon from '@material-ui/core/Icon';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Typography from '@material-ui/core/Typography';\nimport clsx from 'clsx';\nimport moment from 'moment';\nimport React from 'react';\nimport { Draggable } from 'react-beautiful-dnd';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { openCardDialog } from '../store/cardSlice';\n\nconst useStyles = makeStyles(theme => ({\n\tcard: {\n\t\ttransitionProperty: 'box-shadow',\n\t\ttransitionDuration: theme.transitions.duration.short,\n\t\ttransitionTimingFunction: theme.transitions.easing.easeInOut\n\t}\n}));\n\nfunction BoardCard(props) {\n\tconst dispatch = useDispatch();\n\tconst board = useSelector(({ scrumboardApp }) => scrumboardApp.board);\n\n\tconst classes = useStyles(props);\n\tconst { cardId, index } = props;\n\tconst card = _.find(board.cards, { id: cardId });\n\tconst checkItemsChecked = getCheckItemsChecked(card);\n\tconst checkItems = getCheckItems(card);\n\tconst commentsCount = getCommentsCount(card);\n\n\tfunction handleCardClick(ev, _card) {\n\t\tev.preventDefault();\n\t\tdispatch(openCardDialog(_card));\n\t}\n\n\tfunction getCheckItemsChecked(_card) {\n\t\treturn _.sum(_card.checklists.map(list => _.sum(list.checkItems.map(x => (x.checked ? 1 : 0)))));\n\t}\n\n\tfunction getCheckItems(_card) {\n\t\treturn _.sum(_card.checklists.map(x => x.checkItems.length));\n\t}\n\n\tfunction getCommentsCount(_card) {\n\t\treturn _.sum(_card.activities.map(x => (x.type === 'comment' ? 1 : 0)));\n\t}\n\n\treturn (\n\t\t<Draggable draggableId={cardId} index={index} type=\"card\">\n\t\t\t{(provided, snapshot) => (\n\t\t\t\t<div ref={provided.innerRef} {...provided.draggableProps} {...provided.dragHandleProps}>\n\t\t\t\t\t<Card\n\t\t\t\t\t\tclassName={clsx(classes.card, 'w-full mb-16 rounded-4 cursor-pointer border-1')}\n\t\t\t\t\t\televation={snapshot.isDragging ? 3 : 0}\n\t\t\t\t\t\tonClick={ev => handleCardClick(ev, card)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{board.settings.cardCoverImages && card.idAttachmentCover !== '' && (\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tclassName=\"block\"\n\t\t\t\t\t\t\t\tsrc={_.find(card.attachments, { id: card.idAttachmentCover }).src}\n\t\t\t\t\t\t\t\talt=\"card cover\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t<div className=\"p-16 pb-0\">\n\t\t\t\t\t\t\t{card.idLabels.length > 0 && (\n\t\t\t\t\t\t\t\t<div className=\"flex flex-wrap mb-8 -mx-4\">\n\t\t\t\t\t\t\t\t\t{card.idLabels.map(id => {\n\t\t\t\t\t\t\t\t\t\tconst label = _.find(board.labels, { id });\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip title={label.name} key={id}>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className={clsx(label.class, 'w-32  h-6 rounded-6 mx-4 mb-6')} />\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t<Typography className=\"font-600 mb-12\">{card.name}</Typography>\n\n\t\t\t\t\t\t\t{(card.due || checkItems > 0) && (\n\t\t\t\t\t\t\t\t<div className=\"flex items-center mb-12 -mx-4\">\n\t\t\t\t\t\t\t\t\t{card.due && (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t'flex items-center px-8 py-4 mx-4 rounded-sm',\n\t\t\t\t\t\t\t\t\t\t\t\tmoment() > moment(card.due)\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'bg-red text-white'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'bg-green text-white'\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Icon className=\"text-16\">access_time</Icon>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"mx-4\">{moment(card.due).format('MMM Do YY')}</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t{checkItems > 0 && (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\t\t\t\t\t\t\t'flex items-center px-8 py-4 mx-4 rounded-sm',\n\t\t\t\t\t\t\t\t\t\t\t\tcheckItemsChecked === checkItems\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'bg-green text-white'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'bg-grey-700 text-white'\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Icon className=\"text-16\">check_circle</Icon>\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"mx-4\">{`${checkItemsChecked}/${checkItems}`}</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{card.idMembers.length > 0 && (\n\t\t\t\t\t\t\t\t<div className=\"flex flex-wrap mb-12 -mx-4\">\n\t\t\t\t\t\t\t\t\t{card.idMembers.map(id => {\n\t\t\t\t\t\t\t\t\t\tconst member = _.find(board.members, { id });\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip title={member.name} key={id}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Avatar className=\"mx-4 w-32 h-32\" src={member.avatar} />\n\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t<div />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"flex justify-between h-48 px-16 border-t-1\">\n\t\t\t\t\t\t\t<div className=\"flex items-center -mx-6\">\n\t\t\t\t\t\t\t\t{card.subscribed && (\n\t\t\t\t\t\t\t\t\t<Icon className=\"text-18 mx-6\" color=\"action\">\n\t\t\t\t\t\t\t\t\t\tremove_red_eye\n\t\t\t\t\t\t\t\t\t</Icon>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t{card.description !== '' && (\n\t\t\t\t\t\t\t\t\t<Icon className=\"text-18 mx-6\" color=\"action\">\n\t\t\t\t\t\t\t\t\t\tdescription\n\t\t\t\t\t\t\t\t\t</Icon>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"flex items-center justify-end -mx-6\">\n\t\t\t\t\t\t\t\t{card.attachments && (\n\t\t\t\t\t\t\t\t\t<span className=\"flex items-center mx-6\">\n\t\t\t\t\t\t\t\t\t\t<Icon className=\"text-18\" color=\"action\">\n\t\t\t\t\t\t\t\t\t\t\tattachment\n\t\t\t\t\t\t\t\t\t\t</Icon>\n\t\t\t\t\t\t\t\t\t\t<Typography className=\"mx-8\" color=\"textSecondary\">\n\t\t\t\t\t\t\t\t\t\t\t{card.attachments.length}\n\t\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{commentsCount > 0 && (\n\t\t\t\t\t\t\t\t\t<span className=\"flex items-center mx-6\">\n\t\t\t\t\t\t\t\t\t\t<Icon className=\"text-18\" color=\"action\">\n\t\t\t\t\t\t\t\t\t\t\tcomment\n\t\t\t\t\t\t\t\t\t\t</Icon>\n\t\t\t\t\t\t\t\t\t\t<Typography className=\"mx-8\" color=\"textSecondary\">\n\t\t\t\t\t\t\t\t\t\t\t{commentsCount}\n\t\t\t\t\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Card>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</Draggable>\n\t);\n}\n\nexport default BoardCard;\n"]},"metadata":{},"sourceType":"module"}