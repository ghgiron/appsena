{"ast":null,"code":"import _objectSpread from\"D:\\\\proyectos_react\\\\Proyecto_sena_desarrollo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"D:\\\\proyectos_react\\\\Proyecto_sena_desarrollo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\proyectos_react\\\\Proyecto_sena_desarrollo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import{createSlice}from'@reduxjs/toolkit';import history from'@history';import _ from'@lodash';import{setInitialSettings,setDefaultSettings}from'app/store/fuse/settingsSlice';import{showMessage}from'app/store/fuse/messageSlice';import jwtService from'app/services/jwtService';export var setUserData=function setUserData(user){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,getState){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:/*\n        You can redirect the logged-in user to a specific route depending on his role\n         */console.log(user.role);if(user.role==='admin'){history.location.state={redirectUrl:'/apps/empresa'// for example 'apps/academy'\n};}else if(user.role==='dashboards'){history.location.state={redirectUrl:'/apps/dashboards/project'// for example 'apps/academy'\n};}/*\n    Set User Settings\n     */dispatch(setDefaultSettings(user.data.settings));dispatch(setUser(user));case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();};export var updateUserSettings=function updateUserSettings(settings){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch,getState){var oldUser,user;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:oldUser=getState().auth.user;user=_.merge({},oldUser,{data:{settings:settings}});dispatch(updateUserData(user));return _context2.abrupt(\"return\",dispatch(setUserData(user)));case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}();};export var updateUserShortcuts=function updateUserShortcuts(shortcuts){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch,getState){var user,newUser;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:user=getState().auth.user;newUser=_objectSpread(_objectSpread({},user),{},{data:_objectSpread(_objectSpread({},user.data),{},{shortcuts:shortcuts})});dispatch(updateUserData(user));return _context3.abrupt(\"return\",dispatch(setUserData(newUser)));case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x5,_x6){return _ref3.apply(this,arguments);};}();};export var logoutUser=function logoutUser(){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch,getState){var user;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:user=getState().auth.user;if(!(!user.role||user.role.length===0)){_context4.next=3;break;}return _context4.abrupt(\"return\",null);case 3:history.push({pathname:'/'});switch(user.from){default:{jwtService.logout();}}dispatch(setInitialSettings());dispatch(userLoggedOut());case 7:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x7,_x8){return _ref4.apply(this,arguments);};}();};export var updateUserData=function updateUserData(user){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch,getState){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!(!user.role||user.role.length===0)){_context5.next=2;break;}return _context5.abrupt(\"return\");case 2:_context5.t0=user.from;_context5.next=5;break;case 5:jwtService.updateUserData(user).then(function(){dispatch(showMessage({message:'User data saved with api'}));}).catch(function(error){dispatch(showMessage({message:error.message}));});return _context5.abrupt(\"break\",7);case 7:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x9,_x10){return _ref5.apply(this,arguments);};}();};var initialState={role:[],// guest\ndata:{displayName:'John Doe',photoURL:'assets/images/avatars/Velazquez.jpg',email:'johndoe@withinpixels.com',shortcuts:['calendar','mail','contacts','todo']}};var userSlice=createSlice({name:'auth/user',initialState:initialState,reducers:{setUser:function setUser(state,action){return action.payload;},userLoggedOut:function userLoggedOut(state,action){return initialState;}},extraReducers:{}});var _userSlice$actions=userSlice.actions,setUser=_userSlice$actions.setUser,userLoggedOut=_userSlice$actions.userLoggedOut;export{setUser,userLoggedOut};export default userSlice.reducer;","map":null,"metadata":{},"sourceType":"module"}