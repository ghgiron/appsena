{"ast":null,"code":"import _toConsumableArray from\"D:\\\\proyectos_react\\\\Proyecto_sena_desarrollo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import FuseUtils from'@fuse/utils';import _ from'@lodash';import jwt from'jsonwebtoken';import mock from'../mock';/* eslint-disable camelcase */var jwtConfig={secret:'some-secret-code-goes-here',expiresIn:'2 days'// A numeric value is interpreted as a seconds count. If you use a string be sure you provide the time units (days, hours, etc)\n};var authDB={users:[{uuid:'0123456789',from:'custom-db',password:'admin',role:'admin',data:{displayName:'celso Mendoza',photoURL:'assets/images/avatars/user.jpg',email:'admin',settings:{layout:{style:'layout1',config:{scroll:'content',navbar:{display:true,folded:true,position:'left'},toolbar:{display:true,style:'fixed',position:'below'},footer:{display:false,style:'fixed',position:'below'},mode:'fullwidth'}},customScrollbars:true},shortcuts:['applications','GestionGAES','crearempresa']}},{uuid:'0123456788',from:'custom-db',password:'admin1',role:'dashboards',data:{displayName:'Profe celso Mendoza',photoURL:'assets/images/avatars/user.jpg',email:'admin1',settings:{layout:{style:'layout1',config:{scroll:'content',navbar:{display:true,folded:true,position:'left'},toolbar:{display:true,style:'fixed',position:'below'},footer:{display:false,style:'fixed',position:'below'},mode:'fullwidth'}},customScrollbars:true},shortcuts:['applications','GestionGAES','crearempresa']}}]};mock.onGet('/api/auth').reply(function(config){var data=JSON.parse(config.data);var email=data.email,password=data.password;var user=_.cloneDeep(authDB.users.find(function(_user){return _user.data.email===email;}));var error={email:user?null:'Verifica tu usuario o email',password:user&&user.password===password?null:'Verifica tu contrase침a'};if(!error.email&&!error.password&&!error.displayName){delete user.password;var access_token=jwt.sign({id:user.uuid},jwtConfig.secret,{expiresIn:jwtConfig.expiresIn});var response={user:user,access_token:access_token};return[200,response];}return[200,{error:error}];});mock.onGet('/api/auth/access-token').reply(function(config){var data=JSON.parse(config.data);var access_token=data.access_token;try{var _jwt$verify=jwt.verify(access_token,jwtConfig.secret),id=_jwt$verify.id;var user=_.cloneDeep(authDB.users.find(function(_user){return _user.uuid===id;}));delete user.password;var updatedAccessToken=jwt.sign({id:user.uuid},jwtConfig.secret,{expiresIn:jwtConfig.expiresIn});var response={user:user,access_token:updatedAccessToken};return[200,response];}catch(e){var error='Token de acceso no v치lido detectado';return[401,{error:error}];}});mock.onPost('/api/auth/register').reply(function(request){var data=JSON.parse(request.data);var displayName=data.displayName,password=data.password,email=data.email;var isEmailExists=authDB.users.find(function(_user){return _user.data.email===email;});var error={email:isEmailExists?'El correo electr칩nico ya est치 en uso':null,displayName:displayName!==''?null:'Ingrese el nombre para mostrar',password:null};if(!error.displayName&&!error.password&&!error.email){var newUser={uuid:FuseUtils.generateGUID(),from:'custom-db',password:password,role:'admin',data:{displayName:displayName,photoURL:'assets/images/avatars/Abbott.jpg',email:email,settings:{},shortcuts:[]}};authDB.users=[].concat(_toConsumableArray(authDB.users),[newUser]);var user=_.cloneDeep(newUser);delete user.password;var access_token=jwt.sign({id:user.uuid},jwtConfig.secret,{expiresIn:jwtConfig.expiresIn});var response={user:user,access_token:access_token};return[200,response];}return[200,{error:error}];});mock.onPost('/api/auth/user/update').reply(function(config){var data=JSON.parse(config.data);var user=data.user;authDB.users=authDB.users.map(function(_user){if(user.uuid===user.id){return _.merge(_user,user);}return _user;});return[200,user];});","map":null,"metadata":{},"sourceType":"module"}