{"ast":null,"code":"var _jsxFileName = \"D:\\\\proyectos_react\\\\Proyecto_sena_desarrollo\\\\src\\\\app\\\\main\\\\apps\\\\gestionempresa\\\\ListaProductoEmpresa.js\";\nimport FuseScrollbars from '@fuse/core/FuseScrollbars';\nimport _ from '@lodash';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Icon from '@material-ui/core/Icon';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TablePagination from '@material-ui/core/TablePagination';\nimport TableRow from '@material-ui/core/TableRow';\nimport clsx from 'clsx';\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { withRouter } from 'react-router-dom'; //import { getProducts, selectProducts } from '../store/productsSlice';\n\nimport ProductsTableHead from './ProductsTableHead';\n\nfunction ProductsTable(props) {\n  const dispatch = useDispatch();\n  const products = useSelector(selectProducts);\n  const searchText = useSelector(({\n    eCommerceApp\n  }) => eCommerceApp.products.searchText);\n  const [selected, setSelected] = useState([]);\n  const [data, setData] = useState(products);\n  const [page, setPage] = useState(0);\n  const [rowsPerPage, setRowsPerPage] = useState(10);\n  const [order, setOrder] = useState({\n    direction: 'asc',\n    id: null\n  });\n  useEffect(() => {\n    dispatch(getProducts());\n  }, [dispatch]);\n  useEffect(() => {\n    if (searchText.length !== 0) {\n      setData(_.filter(products, item => item.name.toLowerCase().includes(searchText.toLowerCase())));\n      setPage(0);\n    } else {\n      setData(products);\n    }\n  }, [products, searchText]);\n\n  function handleRequestSort(event, property) {\n    const id = property;\n    let direction = 'desc';\n\n    if (order.id === property && order.direction === 'desc') {\n      direction = 'asc';\n    }\n\n    setOrder({\n      direction,\n      id\n    });\n  }\n\n  function handleSelectAllClick(event) {\n    if (event.target.checked) {\n      setSelected(data.map(n => n.id));\n      return;\n    }\n\n    setSelected([]);\n  }\n\n  function handleClick(item) {\n    props.history.push(`/apps/e-commerce/products/${item.id}/${item.handle}`);\n  }\n\n  function handleCheck(event, id) {\n    const selectedIndex = selected.indexOf(id);\n    let newSelected = [];\n\n    if (selectedIndex === -1) {\n      newSelected = newSelected.concat(selected, id);\n    } else if (selectedIndex === 0) {\n      newSelected = newSelected.concat(selected.slice(1));\n    } else if (selectedIndex === selected.length - 1) {\n      newSelected = newSelected.concat(selected.slice(0, -1));\n    } else if (selectedIndex > 0) {\n      newSelected = newSelected.concat(selected.slice(0, selectedIndex), selected.slice(selectedIndex + 1));\n    }\n\n    setSelected(newSelected);\n  }\n\n  function handleChangePage(event, value) {\n    setPage(value);\n  }\n\n  function handleChangeRowsPerPage(event) {\n    setRowsPerPage(event.target.value);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"w-full flex flex-col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(FuseScrollbars, {\n    className: \"flex-grow overflow-x-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    stickyHeader: true,\n    className: \"min-w-xl\",\n    \"aria-labelledby\": \"tableTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(ProductsTableHead, {\n    numSelected: selected.length,\n    order: order,\n    onSelectAllClick: handleSelectAllClick,\n    onRequestSort: handleRequestSort,\n    rowCount: data.length,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 21\n    }\n  }, _.orderBy(data, [o => {\n    switch (order.id) {\n      case 'categories':\n        {\n          return o.categories[0];\n        }\n\n      default:\n        {\n          return o[order.id];\n        }\n    }\n  }], [order.direction]).slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(n => {\n    const isSelected = selected.indexOf(n.id) !== -1;\n    return /*#__PURE__*/React.createElement(TableRow, {\n      className: \"h-64 cursor-pointer\",\n      hover: true,\n      role: \"checkbox\",\n      \"aria-checked\": isSelected,\n      tabIndex: -1,\n      key: n.id,\n      selected: isSelected,\n      onClick: event => handleClick(n),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      className: \"w-40 md:w-64 text-center\",\n      padding: \"none\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(Checkbox, {\n      checked: isSelected,\n      onClick: event => event.stopPropagation(),\n      onChange: event => handleCheck(event, n.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 45\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      className: \"w-52 px-4 md:px-0\",\n      component: \"th\",\n      scope: \"row\",\n      padding: \"none\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 41\n      }\n    }, n.images.length > 0 && n.featuredImageId ? /*#__PURE__*/React.createElement(\"img\", {\n      className: \"w-full block rounded\",\n      src: _.find(n.images, {\n        id: n.featuredImageId\n      }).url,\n      alt: n.name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 49\n      }\n    }) : /*#__PURE__*/React.createElement(\"img\", {\n      className: \"w-full block rounded\",\n      src: \"assets/images/ecommerce/product-image-placeholder.png\",\n      alt: n.name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 53\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      className: \"p-4 md:p-16\",\n      component: \"th\",\n      scope: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 41\n      }\n    }, n.name), /*#__PURE__*/React.createElement(TableCell, {\n      className: \"p-4 md:p-16 truncate\",\n      component: \"th\",\n      scope: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 41\n      }\n    }, n.categories.join(', ')), /*#__PURE__*/React.createElement(TableCell, {\n      className: \"p-4 md:p-16\",\n      component: \"th\",\n      scope: \"row\",\n      align: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 45\n      }\n    }, \"$\"), n.priceTaxIncl), /*#__PURE__*/React.createElement(TableCell, {\n      className: \"p-4 md:p-16\",\n      component: \"th\",\n      scope: \"row\",\n      align: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 41\n      }\n    }, n.quantity, /*#__PURE__*/React.createElement(\"i\", {\n      className: clsx('inline-block w-8 h-8 rounded mx-8', n.quantity <= 5 && 'bg-red', n.quantity > 5 && n.quantity <= 25 && 'bg-orange', n.quantity > 25 && 'bg-green'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 45\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      className: \"p-4 md:p-16\",\n      component: \"th\",\n      scope: \"row\",\n      align: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 41\n      }\n    }, n.active ? /*#__PURE__*/React.createElement(Icon, {\n      className: \"text-green text-20\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 49\n      }\n    }, \"check_circle\") : /*#__PURE__*/React.createElement(Icon, {\n      className: \"text-red text-20\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 53\n      }\n    }, \"remove_circle\")));\n  })))), /*#__PURE__*/React.createElement(TablePagination, {\n    className: \"flex-shrink-0 border-t-1\",\n    component: \"div\",\n    count: data.length,\n    rowsPerPage: rowsPerPage,\n    page: page,\n    backIconButtonProps: {\n      'aria-label': 'Previous Page'\n    },\n    nextIconButtonProps: {\n      'aria-label': 'Next Page'\n    },\n    onChangePage: handleChangePage,\n    onChangeRowsPerPage: handleChangeRowsPerPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 13\n    }\n  }));\n}\n\nexport default withRouter(ProductsTable);","map":{"version":3,"sources":["D:/proyectos_react/Proyecto_sena_desarrollo/src/app/main/apps/gestionempresa/ListaProductoEmpresa.js"],"names":["FuseScrollbars","_","Checkbox","Icon","Table","TableBody","TableCell","TablePagination","TableRow","clsx","React","useEffect","useState","useDispatch","useSelector","withRouter","ProductsTableHead","ProductsTable","props","dispatch","products","selectProducts","searchText","eCommerceApp","selected","setSelected","data","setData","page","setPage","rowsPerPage","setRowsPerPage","order","setOrder","direction","id","getProducts","length","filter","item","name","toLowerCase","includes","handleRequestSort","event","property","handleSelectAllClick","target","checked","map","n","handleClick","history","push","handle","handleCheck","selectedIndex","indexOf","newSelected","concat","slice","handleChangePage","value","handleChangeRowsPerPage","orderBy","o","categories","isSelected","stopPropagation","images","featuredImageId","find","url","join","priceTaxIncl","quantity","active"],"mappings":"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","sourcesContent":["import FuseScrollbars from '@fuse/core/FuseScrollbars';\r\nimport _ from '@lodash';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Icon from '@material-ui/core/Icon';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport clsx from 'clsx';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\n//import { getProducts, selectProducts } from '../store/productsSlice';\r\nimport ProductsTableHead from './ProductsTableHead';\r\n\r\nfunction ProductsTable(props) {\r\n    const dispatch = useDispatch();\r\n    const products = useSelector(selectProducts);\r\n    const searchText = useSelector(({ eCommerceApp }) => eCommerceApp.products.searchText);\r\n\r\n    const [selected, setSelected] = useState([]);\r\n    const [data, setData] = useState(products);\r\n    const [page, setPage] = useState(0);\r\n    const [rowsPerPage, setRowsPerPage] = useState(10);\r\n    const [order, setOrder] = useState({\r\n        direction: 'asc',\r\n        id: null\r\n    });\r\n\r\n    useEffect(() => {\r\n        dispatch(getProducts());\r\n    }, [dispatch]);\r\n\r\n    useEffect(() => {\r\n        if (searchText.length !== 0) {\r\n            setData(_.filter(products, item => item.name.toLowerCase().includes(searchText.toLowerCase())));\r\n            setPage(0);\r\n        } else {\r\n            setData(products);\r\n        }\r\n    }, [products, searchText]);\r\n\r\n    function handleRequestSort(event, property) {\r\n        const id = property;\r\n        let direction = 'desc';\r\n\r\n        if (order.id === property && order.direction === 'desc') {\r\n            direction = 'asc';\r\n        }\r\n\r\n        setOrder({\r\n            direction,\r\n            id\r\n        });\r\n    }\r\n\r\n    function handleSelectAllClick(event) {\r\n        if (event.target.checked) {\r\n            setSelected(data.map(n => n.id));\r\n            return;\r\n        }\r\n        setSelected([]);\r\n    }\r\n\r\n    function handleClick(item) {\r\n        props.history.push(`/apps/e-commerce/products/${item.id}/${item.handle}`);\r\n    }\r\n\r\n    function handleCheck(event, id) {\r\n        const selectedIndex = selected.indexOf(id);\r\n        let newSelected = [];\r\n\r\n        if (selectedIndex === -1) {\r\n            newSelected = newSelected.concat(selected, id);\r\n        } else if (selectedIndex === 0) {\r\n            newSelected = newSelected.concat(selected.slice(1));\r\n        } else if (selectedIndex === selected.length - 1) {\r\n            newSelected = newSelected.concat(selected.slice(0, -1));\r\n        } else if (selectedIndex > 0) {\r\n            newSelected = newSelected.concat(selected.slice(0, selectedIndex), selected.slice(selectedIndex + 1));\r\n        }\r\n\r\n        setSelected(newSelected);\r\n    }\r\n\r\n    function handleChangePage(event, value) {\r\n        setPage(value);\r\n    }\r\n\r\n    function handleChangeRowsPerPage(event) {\r\n        setRowsPerPage(event.target.value);\r\n    }\r\n\r\n    return (\r\n        <div className=\"w-full flex flex-col\">\r\n            <FuseScrollbars className=\"flex-grow overflow-x-auto\">\r\n                <Table stickyHeader className=\"min-w-xl\" aria-labelledby=\"tableTitle\">\r\n                    <ProductsTableHead\r\n                        numSelected={selected.length}\r\n                        order={order}\r\n                        onSelectAllClick={handleSelectAllClick}\r\n                        onRequestSort={handleRequestSort}\r\n                        rowCount={data.length}\r\n                    />\r\n\r\n                    <TableBody>\r\n                        {_.orderBy(\r\n                            data,\r\n                            [\r\n                                o => {\r\n                                    switch (order.id) {\r\n                                        case 'categories': {\r\n                                            return o.categories[0];\r\n                                        }\r\n                                        default: {\r\n                                            return o[order.id];\r\n                                        }\r\n                                    }\r\n                                }\r\n                            ],\r\n                            [order.direction]\r\n                        )\r\n                            .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n                            .map(n => {\r\n                                const isSelected = selected.indexOf(n.id) !== -1;\r\n                                return (\r\n                                    <TableRow\r\n                                        className=\"h-64 cursor-pointer\"\r\n                                        hover\r\n                                        role=\"checkbox\"\r\n                                        aria-checked={isSelected}\r\n                                        tabIndex={-1}\r\n                                        key={n.id}\r\n                                        selected={isSelected}\r\n                                        onClick={event => handleClick(n)}\r\n                                    >\r\n                                        <TableCell className=\"w-40 md:w-64 text-center\" padding=\"none\">\r\n                                            <Checkbox\r\n                                                checked={isSelected}\r\n                                                onClick={event => event.stopPropagation()}\r\n                                                onChange={event => handleCheck(event, n.id)}\r\n                                            />\r\n                                        </TableCell>\r\n\r\n                                        <TableCell\r\n                                            className=\"w-52 px-4 md:px-0\"\r\n                                            component=\"th\"\r\n                                            scope=\"row\"\r\n                                            padding=\"none\"\r\n                                        >\r\n                                            {n.images.length > 0 && n.featuredImageId ? (\r\n                                                <img\r\n                                                    className=\"w-full block rounded\"\r\n                                                    src={_.find(n.images, { id: n.featuredImageId }).url}\r\n                                                    alt={n.name}\r\n                                                />\r\n                                            ) : (\r\n                                                    <img\r\n                                                        className=\"w-full block rounded\"\r\n                                                        src=\"assets/images/ecommerce/product-image-placeholder.png\"\r\n                                                        alt={n.name}\r\n                                                    />\r\n                                                )}\r\n                                        </TableCell>\r\n\r\n                                        <TableCell className=\"p-4 md:p-16\" component=\"th\" scope=\"row\">\r\n                                            {n.name}\r\n                                        </TableCell>\r\n\r\n                                        <TableCell className=\"p-4 md:p-16 truncate\" component=\"th\" scope=\"row\">\r\n                                            {n.categories.join(', ')}\r\n                                        </TableCell>\r\n\r\n                                        <TableCell className=\"p-4 md:p-16\" component=\"th\" scope=\"row\" align=\"right\">\r\n                                            <span>$</span>\r\n                                            {n.priceTaxIncl}\r\n                                        </TableCell>\r\n\r\n                                        <TableCell className=\"p-4 md:p-16\" component=\"th\" scope=\"row\" align=\"right\">\r\n                                            {n.quantity}\r\n                                            <i\r\n                                                className={clsx(\r\n                                                    'inline-block w-8 h-8 rounded mx-8',\r\n                                                    n.quantity <= 5 && 'bg-red',\r\n                                                    n.quantity > 5 && n.quantity <= 25 && 'bg-orange',\r\n                                                    n.quantity > 25 && 'bg-green'\r\n                                                )}\r\n                                            />\r\n                                        </TableCell>\r\n\r\n                                        <TableCell className=\"p-4 md:p-16\" component=\"th\" scope=\"row\" align=\"right\">\r\n                                            {n.active ? (\r\n                                                <Icon className=\"text-green text-20\">check_circle</Icon>\r\n                                            ) : (\r\n                                                    <Icon className=\"text-red text-20\">remove_circle</Icon>\r\n                                                )}\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                );\r\n                            })}\r\n                    </TableBody>\r\n                </Table>\r\n            </FuseScrollbars>\r\n\r\n            <TablePagination\r\n                className=\"flex-shrink-0 border-t-1\"\r\n                component=\"div\"\r\n                count={data.length}\r\n                rowsPerPage={rowsPerPage}\r\n                page={page}\r\n                backIconButtonProps={{\r\n                    'aria-label': 'Previous Page'\r\n                }}\r\n                nextIconButtonProps={{\r\n                    'aria-label': 'Next Page'\r\n                }}\r\n                onChangePage={handleChangePage}\r\n                onChangeRowsPerPage={handleChangeRowsPerPage}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default withRouter(ProductsTable);\r\n"]},"metadata":{},"sourceType":"module"}